import{o as Oe,r as c,af as _e,ab as ze,b as x,l as ge,e as r,f as m,g as s,C as M,A as C,h as d,m as U,j as g,i as N,z as S,w as te,q as Ge,u as Ye,c as Z,n as He,a as Je,F as me,y as Ke}from"./usetoast.esm40505.js";import{a as R,e as L,s as ee,h as D,u as We,b as Xe,c as Ze,d as $e,f as et,g as tt}from"./helpers40505.js";import{u as ye}from"./survey40505.js";import{u as at}from"./user40505.js";import{u as lt}from"./group40505.js";import{b as nt,c as le,a as ne}from"./formatData40505.js";import{A as st}from"./AudienceCard40505.js";import{U as ot}from"./UploadImageCard40505.js";import{u as fe}from"./useconfirm.esm40505.js";import{_ as he}from"./_plugin-vue_export-helper40505.js";import{v as ve}from"./runtime-dom.esm-bundler40505.js";import"./datetime40505.js";import"./attachment40505.js";const it={props:["index","tmp_survey","languages","submitForm"],setup(i,t){Oe(()=>{q.value=i.tmp_survey.questions[i.index].typology,w.value=i.tmp_survey.questions[i.index].translations[i.languages[0]].text,i.languages[1]&&(T.value=i.tmp_survey.questions[i.index].translations[i.languages[1]].text)});const n=c(),e=c(),B=c([]),Y=ye(),y=_e(),F=c([]),q=c(),w=c(),T=c();fe();const P=c([{label:"Open",value:"open"},{label:"Closed",value:"closed"}]),o=c(!1),b=function(){const v={};let _=i.languages[0],p=i.languages[1];v[_]&&v[_].text?v[_].text=n.value:v[_]={text:n.value},v[p]&&v[p].text?v[p].text=e.value:v[p]={text:e.value},B.value||(B.value=[]);const u={translation:v,index:i.index};t.emit("updateAnswer",u),n.value="",e.value=""},j=async function(v,_){v?await Y.deleteAnswerFromSurvey(v).then(()=>{R(y,{message:"Answer deleted correctly.",title:""}),i.tmp_survey.questions[i.index].answers.splice(_,1)}).catch(p=>{L(y,p)}):i.tmp_survey.questions[i.index].answers.splice(_,1)},J=v=>{let{newData:_}=v;const p=_.translations[i.languages[0]].id;if(p&&Q(p,_.translations[i.languages[0]].text),i.languages[1]){const u=_.translations[i.languages[1]].id;u&&Q(u,_.translations[i.languages[1]].text)}},Q=async function(v,_){const p={id:v,text:_};await Y.updateAnswer(p).then(()=>{R(y,{message:"Answer update correctly.",title:""})}).catch(u=>{L(y,u)})},O=function(v){if(i.submitForm)return v==""||v==null?o.value=!0:o.value=!1,o.value};return ze(i.tmp_survey,async(v,_)=>{i.tmp_survey.questions[i.index]&&(q.value=i.tmp_survey.questions[i.index].typology,w.value=i.tmp_survey.questions[i.index].translations[i.languages[0]].text,i.languages[1]&&(T.value=i.tmp_survey.questions[i.index].translations[i.languages[1]].text))}),{newAnswer:n,editingRows:F,typology:q,surveyTypology:P,text:w,text2:T,newAnswer2:e,addAnswer:b,deleteAnswer:j,onRowEditSave:J,validateField:O}}};const ut={key:0,class:"formgrid grid col-12 px-0 align-items-center"},rt={class:"field col-5"},dt={for:"note"},ct={class:"uppercase"},mt={key:0,class:"p-error"},vt={key:0,class:"field col-5"},_t={for:"note"},gt={class:"uppercase"},yt={key:0,class:"p-error"},ft={class:"col-12"},ht={class:"field col-2 flex flex-column pl-0"},xt=s("label",{for:"typology"},"Typology",-1),wt={key:1,class:"field col-12 flex flex-column mt-3"},bt={class:"field flex align-items-center"},pt={class:"field col-5 p-0 mr-3"},Ct={for:"answer"},Vt={class:"uppercase"},kt={key:0,class:"p-error"},St={key:0,class:"field col-5 p-0"},Tt={for:"answer"},At={class:"uppercase"},Ft={key:0,class:"p-error"},Ut={key:0},qt={key:1},Dt={key:0},It={key:1};function Et(i,t,n,e,B,Y){const y=x("InputText"),F=x("Dropdown"),q=x("Button"),w=x("Column"),T=x("DataTable"),P=ge("tooltip");return n.languages?(r(),m("div",ut,[s("div",rt,[s("label",dt,[M("Question* "),s("span",ct,"("+C(n.languages[0])+")",1)]),d(y,{type:"text",modelValue:e.text,"onUpdate:modelValue":[t[0]||(t[0]=o=>e.text=o),t[1]||(t[1]=o=>i.$emit("updateText",{index:n.index,text:e.text,lang:n.languages[0]}))],class:U(["w-full",{"p-invalid":e.validateField(e.text)}])},null,8,["modelValue","class"]),e.validateField(e.text)?(r(),m("small",mt,"Campo obbligatorio.")):g("",!0)]),n.languages[1]?(r(),m("div",vt,[s("label",_t,[M("Question* "),s("span",gt,"("+C(n.languages[1])+")",1)]),d(y,{type:"text",modelValue:e.text2,"onUpdate:modelValue":[t[2]||(t[2]=o=>e.text2=o),t[3]||(t[3]=o=>i.$emit("updateText",{index:n.index,text:e.text2,lang:n.languages[1]}))],class:U(["w-full",{"p-invalid":e.validateField(e.text2)}])},null,8,["modelValue","class"]),e.validateField(e.text2)?(r(),m("small",yt,"Campo obbligatorio.")):g("",!0)])):g("",!0),s("div",ft,[s("div",ht,[xt,d(F,{modelValue:e.typology,"onUpdate:modelValue":t[4]||(t[4]=o=>e.typology=o),options:e.surveyTypology,optionLabel:"label",optionValue:"value",placeholder:"",class:"capitalize",onChange:t[5]||(t[5]=o=>i.$emit("updateTypology",{index:n.index,typology:e.typology}))},null,8,["modelValue","options"])])]),e.typology=="closed"?(r(),m("div",wt,[s("div",bt,[s("div",pt,[s("label",Ct,[M("Answer* "),s("span",Vt,"("+C(n.languages[0])+")",1)]),d(y,{type:"text",modelValue:e.newAnswer,"onUpdate:modelValue":t[6]||(t[6]=o=>e.newAnswer=o),class:U(["w-full",{"p-invalid":n.tmp_survey.answers&&n.tmp_survey.answers.length<1&&e.validateField(e.newAnswer)}]),id:"answer"},null,8,["modelValue","class"]),n.tmp_survey.answers&&n.tmp_survey.answers.length<1&&e.validateField(e.newAnswer)?(r(),m("small",kt,"Campo obbligatorio.")):g("",!0)]),n.languages[1]?(r(),m("div",St,[s("label",Tt,[M("Answer* "),s("span",At,"("+C(n.languages[1])+")",1)]),d(y,{type:"text",modelValue:e.newAnswer2,"onUpdate:modelValue":t[7]||(t[7]=o=>e.newAnswer2=o),class:U(["w-full",{"p-invalid":n.tmp_survey.answers&&n.tmp_survey.answers.length<1&&e.validateField(e.newAnswer2)}]),id:"answer"},null,8,["modelValue","class"]),n.tmp_survey.answers&&n.tmp_survey.answers.length<1&&e.validateField(e.newAnswer2)?(r(),m("small",Ft,"Campo obbligatorio.")):g("",!0)])):g("",!0),d(q,{label:"Add answer",class:"p-button-outlined ml-3 mt-2",onClick:e.addAnswer,disabled:!e.newAnswer||n.languages[1]&&!e.newAnswer2},null,8,["onClick","disabled"])]),n.tmp_survey.questions&&n.tmp_survey.questions[n.index]&&n.tmp_survey.questions[n.index].answers.length>0?(r(),N(T,{key:0,value:n.tmp_survey.questions[n.index].answers,responsiveLayout:"scroll",editMode:"row",editingRows:e.editingRows,"onUpdate:editingRows":t[8]||(t[8]=o=>e.editingRows=o),onRowEditSave:e.onRowEditSave},{default:S(()=>[d(w,{field:"",header:n.languages[0].toUpperCase()},{body:S(({data:o})=>[o.translations[n.languages[0]]&&(o.translations[n.languages[0]].text||o.translations[n.languages[0]].text=="")?(r(),m("span",Ut,C(o.translations[n.languages[0]].text),1)):(r(),m("span",qt,C(o.translations[n.languages[0]]),1))]),editor:S(({data:o})=>[o.translations[n.languages[0]]&&(o.translations[n.languages[0]].text||o.translations[n.languages[0]].text=="")?(r(),N(y,{key:0,class:"w-full",modelValue:o.translations[n.languages[0]].text,"onUpdate:modelValue":b=>o.translations[n.languages[0]].text=b},null,8,["modelValue","onUpdate:modelValue"])):(r(),N(y,{key:1,modelValue:o.translations[n.languages[0]],"onUpdate:modelValue":b=>o.translations[n.languages[0]]=b,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]))]),_:1},8,["header"]),n.languages[1]?(r(),N(w,{key:0,field:"",header:n.languages[1].toUpperCase()},{body:S(({data:o})=>[o.translations[n.languages[1]]&&(o.translations[n.languages[1]].text||o.translations[n.languages[1]].text=="")?(r(),m("span",Dt,C(o.translations[n.languages[1]].text),1)):(r(),m("span",It,C(o.translations[n.languages[1]]),1))]),editor:S(({data:o})=>[o.translations[n.languages[1]]&&(o.translations[n.languages[1]].text||o.translations[n.languages[1]].text=="")?(r(),N(y,{key:0,class:"w-full",modelValue:o.translations[n.languages[1]].text,"onUpdate:modelValue":b=>o.translations[n.languages[1]].text=b},null,8,["modelValue","onUpdate:modelValue"])):(r(),N(y,{key:1,modelValue:o.translations[n.languages[1]],"onUpdate:modelValue":b=>o.translations[n.languages[1]]=b,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]))]),_:1},8,["header"])):g("",!0),d(w,{rowEditor:!0,style:{width:"10%","min-width":"8rem"},bodyStyle:"text-align:center"}),d(w,{header:"",style:{width:"9rem"}},{body:S(({data:o,index:b})=>[te(d(q,{type:"button","aria-haspopup":"true","aria-controls":"overlay_menu",class:"p-button-text p-button-rounded text-300 surface-200 mr-3",icon:"pi pi-trash",onClick:j=>e.deleteAnswer(o.id,b)},null,8,["onClick"]),[[P,"Delete",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","editingRows","onRowEditSave"])):g("",!0)])):g("",!0)])):g("",!0)}const Nt=he(it,[["render",Et]]),Bt={setup(){const i=c({icon:"pi pi-home",to:"/surveys"}),t=c(""),n=c([{label:""}]),e=c({}),B=c(0),Y=c(),y=c(!1),F=c(),q=c(!0),w=c(!0),T=c(!0),P=c({}),o=c(),b=c(""),j=c({}),J=c([]),Q=c(),O=c(),v=c([{label:"Online",value:!0},{label:"Offline",value:!1}]),_=c(!1),p=c([]),u=c(0),I=c([]),z=Ge(),V=_e(),f=fe(),A=ye(),E=Ye(),xe=lt(),we=at(),K=c(!1),be=c({sellout_code:{value:"",matchMode:"contains"},full_name:{value:"",matchMode:"contains"}}),k=Z(()=>A.getCurrentSurvey),se=Z(()=>E.getSelectedCountry),pe=Z(()=>A.allSurveys),Ce=Z(()=>we.userRoles),Ve=Z(()=>xe.allGroups),$=async function(a){ee(),A.fetchSurveyDetail(a).then(()=>{D(),Te()}).catch(l=>{D(),L(V,l)})},oe=async function(){const a=new Map;await A.fetchAllSurveys(a).catch(l=>{L(V,l)})},ke=async function(){const a={id:e.value.id,formData:ie()};A.updateSurvey(a).then(()=>{D(),_.value?de():($(e.value.id+""),R(V,{message:"Survey updated correctly.",title:""}))}).catch(l=>{D(),L(V,l)})},ie=function(){var H;const a=new FormData,l=Object.assign({},e.value);l.active_from=le(e.value.active_from),l.active_to=le(e.value.active_to),l.hidden_at=le(e.value.hidden_at),l.country_id=(H=l.country)==null?void 0:H.id,delete l.country,(t.value||l.id)&&We(k,e.value);const h=O.value.tmp_image;h&&h.image&&(l.image=h.image),l.answers=[];for(const ae in e.value.answers){const X=e.value.answers[ae];X.id?l.answers.push({}):l.answers.push(X)}return l.hide_results||(l.hide_results="false"),delete l.target_all,delete l.target_clusters,delete l.target_group_ids,delete l.target_groups,delete l.created_at,delete l.updated_at,delete l.can_edit,delete l.can_delete,Xe(a,l,"survey"),Ze(Q,a,"survey"),a},Se=async function(){const a={formData:ie()};A.createSurvey(a).then(()=>{D(),$(k.value.id+""),R(V,{message:"Survey created correctly.",title:""}),Je.push({name:"survey-detail",params:{id:k.value.id}})}).catch(l=>{D(),L(V,l)})},Te=function(){if(k.value){e.value=Object.assign({},k.value),k.value.active_from&&(e.value.active_from=ne(k.value.active_from+"")),k.value.active_to&&(e.value.active_to=ne(k.value.active_to+"")),k.value.hidden_at&&(e.value.hidden_at=ne(k.value.hidden_at+"")),re(),$e(k,e);for(const a in e.value.answers)for(const l in e.value.answers[+a].translations){const h=e.value.answers[+a];delete h.translations[l].updated_at,delete h.translations[l].created_at}et(Q,e),tt(O,e),W()}},Ae=function(){G(e.value.active_from),G(e.value.active_to),G(e.value.hidden_at),G(e.value.typology),e.value.questions.forEach(a=>{a[b.value]?G(a[b.value].text):K.value=!0,G(a.typology)})},ue=function(){if(y.value=!0,Ae(),K.value){R(V,{message:"Check that you have completed the required fields.",title:"",error:!0});return}t.value!=""||e.value.id?ke():Se(),y.value=!1,ee()},G=function(a){if(y.value)return a==""||a==null?K.value=!0:K.value=!1,K.value},Fe=function(a,l){switch(a){case 1:{l?(e.value.target_clusters=[],e.value.target_group_ids=[],T.value=!1,w.value=!1):(w.value=!0,T.value=!0);break}case 2:{l?(T.value=!1,e.value.target_group_ids=[]):T.value=!0;break}case 3:{l?(w.value=!1,e.value.target_clusters=[]):w.value=!0;break}}},Ue=a=>{e.value.image_url="",e.value.image=a.files[0]},re=function(){var a;e.value.answers||(e.value.answers=[]),I.value=[],(a=e.value.country.language_codes)==null||a.forEach((l,h)=>{I.value.push(l),j.value[l]="",J.value.push({field:"lang",header:l})})},qe=function(){return e.value.online?"Status online":"Status offline"},De=async function(a){if(!(k.value.online&&e.value.online)){if(!k.value.online&&e.value.online){_.value=!0,ue();return}de()}},de=async function(){const a=new Map;a.set("online",e.value.online),a.set("survey_id",e.value.id),await A.changeStatusSurvey(a).then(()=>{$(e.value.id+""),R(V,{message:"Survey status changed correctly",title:""}),_.value=!1})},Ie=a=>{f.require({group:"push",target:a.currentTarget,message:"Are you sure you want to send the push notification?",icon:"pi pi-exclamation-triangle"})},Ee=async function(){ee(),await A.sendPush(e.value.id+"").then(()=>{R(V,{message:"Notification sent correctly.",title:"",error:!1}),ce(),D()}).catch(a=>{D(),L(V,a)})},ce=function(){if(document.getElementsByClassName("p-confirm-dialog-reject")&&document.getElementsByClassName("p-confirm-dialog-reject")[0]){var a=document.getElementsByClassName("p-confirm-dialog-reject")[0];a.click()}if(document.getElementsByClassName("p-confirm-dialog-reject")&&document.getElementsByClassName("p-confirm-dialog-reject")[1]){var l=document.getElementsByClassName("p-confirm-dialog-reject")[1];l.click()}},W=function(){var a,l;p.value=[];for(let h=0;h<+e.value.questions_number;h++){let ae={title:"Question "+(h+1),content:""};if(p.value.push(ae),e.value.questions||(e.value.questions=[]),!e.value.questions[h]){const X={answers:[],translations:{}};(l=(a=e.value.country)==null?void 0:a.language_codes)==null||l.forEach(Pe=>{X.translations[Pe]={text:null}}),e.value.questions[h]=X}}u.value=0,document.getElementsByClassName("p-tabview-nav-link")&&document.getElementsByClassName("p-tabview-nav-link")[0]&&document.getElementsByClassName("p-tabview-nav-link")[0].click()},Ne=function(a){var l,h,H;e.value.questions&&(e.value.questions[a.index]||(e.value.questions[a.index]={answers:[]}),(H=(h=(l=e.value)==null?void 0:l.questions[a.index])==null?void 0:h.answers)==null||H.push({translations:a.translation}))},Be=function(a){e.value.questions[a.index].typology=a.typology},je=function(a){e.value.questions&&(e.value.questions[a.index].translations[a.lang].text=a.text)},Qe=function(a){let l=a;e.value.questions[l]&&(e.value.questions[l].id?(Re(e.value.questions[l].id),e.value.questions_number=e.value.questions_number-1):(e.value.questions.splice(l,1),B.value+=1,e.value.questions_number=e.value.questions_number-1,W()))},Re=async function(a){ee(),await A.deleteQuestion(a).then(()=>{R(V,{message:"Question successfully deleted",title:"",error:!1});for(let l=0;l<e.value.questions.length;l++)e.value.questions[l].id==a&&(e.value.questions.splice(l,1),B.value+=1);W(),D()}).catch(l=>{D(),L(V,l)})},Le=(a,l)=>{f.require({group:"delete",target:a.currentTarget,message:"Are you sure you want to delete this question?",icon:"pi pi-exclamation-triangle",acceptLabel:l})},Me=()=>{e.value.hidden_at||(e.value.hidden_at=e.value.active_to)};return He(async()=>{var a,l;oe(),t.value=z.params.id+"",t.value!=""&&t.value!="undefined"?($(t.value),n.value[0]={label:"Edit survey"}):(n.value[0]={label:"New survey"},e.value.country_id=se.value.id,e.value.country=se.value,e.value.online=!1,e.value.typology="open",e.value.can_edit=!0,e.value.translations||(e.value.translations={},I.value=[],(l=(a=e.value.country)==null?void 0:a.language_codes)==null||l.forEach(h=>{I.value.push(h),e.value.translations[h]={title:null,short_description:null,description:null}})),e.value.questions_number=1,W())}),{home:i,items:n,tmp_survey:e,filteredSurveys:Y,allSurveys:pe,filters:be,allGroups:Ve,newUser:F,showCheckboxAll:q,showSelectClusters:w,showSelectGroups:T,uploadedFile:P,newAnswer:o,userRoles:Ce,question:j,audienceCard:Q,uploadImageCard:O,survey_status:v,tabs:p,active:u,submitForm:y,countForUpdate:B,languages:I,surveyDetail:k,saveSurvey:ue,validateField:G,fetchAllSurveys:oe,setSelected:Fe,onSelectedFiles:Ue,populateSelectLanguages:re,getTooltipValue:qe,changeStatus:De,confirmSendPush:Ie,closePopup:ce,sendPush:Ee,generateTab:W,updateAnswerFromTabQuestion:Ne,updateTypologyFromTabQuestion:Be,updateTextFromTabQuestion:je,confirmDelete:Qe,confirmDeleteQuestion:Le,updateVisibileUntil:Me,showNotificationPopUp:a=>{f.require({target:a.currentTarget,message:"",group:"notification-group",icon:"",acceptIcon:"",rejectIcon:""})},formatDataFromISO:nt}},components:{AudienceCard:st,UploadImageCard:ot,TabQuestionSurvey:Nt}};const jt={class:"m-4"},Qt={class:"flex justify-content-between align-items-center mb-3"},Rt={class:"flex flex-row"},Lt={class:"flex align-items-center justify-content-between"},Mt=s("h2",{class:"mb-2"},"SURVEY DETAILS",-1),Pt={key:0,class:"field col-2 mb-0"},Ot={class:"formgrid grid col-10 px-0"},zt={class:"field col-3"},Gt=s("label",{for:"name"},"Active from*",-1),Yt={key:0,class:"p-error"},Ht={class:"field col-3"},Jt=s("label",{for:"name"},"Active to*",-1),Kt={key:0,class:"p-error"},Wt={class:"field col-4"},Xt=s("label",{for:"name"},"Visible until*",-1),Zt={key:0,class:"p-error"},$t=s("div",{class:"flex align-items-center justify-content-between"},[s("h2",{class:"mb-3"},"SURVEY CONTENT")],-1),ea={key:0,class:"formgrid grid col-12 px-0"},ta={class:"field col-5 flex flex-column"},aa={for:"title"},la={class:"uppercase"},na=s("span",{class:"text-sm font-italic"},"Maximum 450 characters",-1),sa={key:0,class:"p-error"},oa={key:0,class:"field col-5 flex flex-column"},ia={for:"title"},ua={class:"uppercase"},ra=s("span",{class:"text-sm font-italic"},"Maximum 450 characters",-1),da={key:0,class:"p-error"},ca={key:1,class:"formgrid grid col-12 px-0"},ma={class:"field col-5 flex flex-column"},va={for:"description"},_a={class:"uppercase"},ga=s("span",{class:"text-sm font-italic"},"Maximum 450 characters",-1),ya={key:0,class:"field col-5 flex flex-column"},fa={for:"description"},ha={class:"uppercase"},xa=s("span",{class:"text-sm font-italic"},"Maximum 450 characters",-1),wa={key:2,class:"flex formgrid grid col-12 align-items-center"},ba={class:"field col-2 flex flex-column"},pa=s("label",{for:"note"},"Number of questions* ",-1),Ca=s("div",{class:"col-1"},null,-1),Va={class:"field-checkbox col-6 mt-4"},ka=s("label",{for:"binary"},"Hide replies to users",-1),Sa=["onClick"],Ta={class:"flex p-4 align-items-center"},Aa={class:"pl-2"},Fa={class:"flex p-3 align-items-center"},Ua={class:"pl-2"},qa={class:"flex align-items-center pb-3 justify-content-end"},Da={class:"flex p-3 align-items-center"},Ia={class:"pl-2"},Ea={class:"flex align-items-center pb-3 justify-content-end"},Na={class:"col-12 mb-2 px-3"},Ba=s("h2",{class:"mb-3"},"Last push notifications",-1);function ja(i,t,n,e,B,Y){const y=x("Breadcrumb"),F=x("Button"),q=x("Dropdown"),w=x("Calendar"),T=x("Card"),P=x("AudienceCard"),o=x("UploadImageCard"),b=x("InputText"),j=x("Textarea"),J=x("Checkbox"),Q=x("TabQuestionSurvey"),O=x("TabPanel"),v=x("TabView"),_=x("ConfirmPopup"),p=ge("tooltip");return r(),m(me,null,[s("div",jt,[s("div",Qt,[d(y,{home:e.home,model:e.items,class:"mt-0 p-0"},null,8,["home","model"]),s("div",Rt,[e.surveyDetail.notification_counter?(r(),m("i",{key:0,class:"pi info-icon mr-1",onClick:t[0]||(t[0]=u=>e.showNotificationPopUp(u))})):g("",!0),e.tmp_survey.id?(r(),N(F,{key:1,label:"Send push",onClick:t[1]||(t[1]=u=>e.confirmSendPush(u)),class:"mr-3 p-button-outlined",icon:"pi pi-envelope"})):g("",!0),d(F,{label:"Save",onClick:e.saveSurvey,disabled:!e.tmp_survey.can_edit},null,8,["onClick","disabled"])])]),d(T,null,{content:S(()=>[s("div",Lt,[Mt,e.tmp_survey.country?(r(),m("div",Pt,[d(q,{modelValue:e.tmp_survey.online,"onUpdate:modelValue":t[2]||(t[2]=u=>e.tmp_survey.online=u),options:e.survey_status,optionLabel:"label",optionValue:"value",class:"w-full capitalize dropdown-status",onChange:t[3]||(t[3]=u=>e.changeStatus(u))},null,8,["modelValue","options"])])):g("",!0)]),s("div",Ot,[s("div",zt,[Gt,d(w,{inputId:"dateformat",modelValue:e.tmp_survey.active_from,"onUpdate:modelValue":t[4]||(t[4]=u=>e.tmp_survey.active_from=u),dateFormat:"dd/mm/yy",manualInput:!1,class:U({"p-invalid":e.validateField(e.tmp_survey.active_from)}),placeholder:"gg/mm/aaaa"},null,8,["modelValue","class"]),e.validateField(e.tmp_survey.active_from)?(r(),m("small",Yt,"Campo obbligatorio.")):g("",!0)]),s("div",Ht,[Jt,d(w,{inputId:"dateformat",modelValue:e.tmp_survey.active_to,"onUpdate:modelValue":t[5]||(t[5]=u=>e.tmp_survey.active_to=u),dateFormat:"dd/mm/yy",manualInput:!1,class:U({"p-invalid":e.validateField(e.tmp_survey.active_to)}),onDateSelect:t[6]||(t[6]=u=>e.updateVisibileUntil())},null,8,["modelValue","class"]),e.validateField(e.tmp_survey.active_to)?(r(),m("small",Kt,"Campo obbligatorio.")):g("",!0)]),s("div",Wt,[Xt,d(w,{inputId:"dateformat",modelValue:e.tmp_survey.hidden_at,"onUpdate:modelValue":t[7]||(t[7]=u=>e.tmp_survey.hidden_at=u),dateFormat:"dd/mm/yy",manualInput:!1,class:U({"p-invalid":e.validateField(e.tmp_survey.hidden_at)})},null,8,["modelValue","class"]),e.validateField(e.tmp_survey.hidden_at)?(r(),m("small",Zt,"Campo obbligatorio.")):g("",!0)])])]),_:1}),te(d(P,{ref:"audienceCard"},null,512),[[ve,e.tmp_survey.country]]),te(d(o,{title:"SURVEY IMAGE",videoUrl:!1,ref:"uploadImageCard",dynamicClass:"col-5",class:"mt-3"},null,512),[[ve,e.tmp_survey.country]]),d(T,{class:"mt-4"},{content:S(()=>{var u,I,z,V;return[$t,e.tmp_survey&&e.tmp_survey.translations&&((u=e.tmp_survey.country)!=null&&u.language_codes)?(r(),m("div",ea,[s("div",ta,[s("label",aa,[M("Title* "),s("span",la,"("+C(e.languages[0])+")",1)]),d(b,{id:"title",type:"text",modelValue:e.tmp_survey.translations[e.languages[0]].title,"onUpdate:modelValue":t[8]||(t[8]=f=>e.tmp_survey.translations[e.languages[0]].title=f),class:U({"p-invalid":e.validateField(e.tmp_survey.translations[e.languages[0]].title)}),maxlength:"450"},null,8,["modelValue","class"]),na,e.validateField(e.tmp_survey.translations[e.languages[0]].title)?(r(),m("small",sa,"Campo obbligatorio.")):g("",!0)]),(I=e.tmp_survey.country)!=null&&I.language_codes&&e.languages[1]?(r(),m("div",oa,[s("label",ia,[M("Title* "),s("span",ua,"("+C(e.languages[1])+")",1)]),d(b,{id:"title",type:"text",modelValue:e.tmp_survey.translations[e.languages[1]].title,"onUpdate:modelValue":t[9]||(t[9]=f=>e.tmp_survey.translations[e.languages[1]].title=f),class:U({"p-invalid":e.validateField(e.tmp_survey.translations[e.languages[1]].title)}),maxlength:"450"},null,8,["modelValue","class"]),ra,e.validateField(e.tmp_survey.translations[e.languages[1]].title)?(r(),m("small",da,"Campo obbligatorio.")):g("",!0)])):g("",!0)])):g("",!0),e.tmp_survey&&e.tmp_survey.translations&&((z=e.tmp_survey.country)!=null&&z.language_codes)?(r(),m("div",ca,[s("div",ma,[s("label",va,[M("Description "),s("span",_a,"("+C(e.languages[0])+")",1)]),d(j,{id:"description",style:{height:"142px"},type:"text",modelValue:e.tmp_survey.translations[e.languages[0]].preview_description,"onUpdate:modelValue":t[10]||(t[10]=f=>e.tmp_survey.translations[e.languages[0]].preview_description=f),maxlength:"450"},null,8,["modelValue"]),ga]),(V=e.tmp_survey.country)!=null&&V.language_codes&&e.languages[1]?(r(),m("div",ya,[s("label",fa,[M("Description "),s("span",ha,"("+C(e.languages[1])+")",1)]),d(j,{id:"description",style:{height:"142px"},type:"text",modelValue:e.tmp_survey.translations[e.languages[1]].preview_description,"onUpdate:modelValue":t[11]||(t[11]=f=>e.tmp_survey.translations[e.languages[1]].preview_description=f),maxlength:"450"},null,8,["modelValue"]),xa])):g("",!0)])):g("",!0),e.tmp_survey&&e.tmp_survey.translations?(r(),m("div",wa,[s("div",ba,[pa,d(q,{modelValue:e.tmp_survey.questions_number,"onUpdate:modelValue":t[12]||(t[12]=f=>e.tmp_survey.questions_number=f),options:[1,2,3,4,5],class:"capitalize",onChange:t[13]||(t[13]=f=>e.generateTab())},null,8,["modelValue"])]),Ca,s("div",Va,[d(J,{inputId:"binary",binary:!0,disabled:!e.showCheckboxAll,modelValue:e.tmp_survey.hide_results,"onUpdate:modelValue":t[14]||(t[14]=f=>e.tmp_survey.hide_results=f)},null,8,["disabled","modelValue"]),ka])])):g("",!0),d(v,{activeIndex:e.active,"onUpdate:activeIndex":t[18]||(t[18]=f=>e.active=f)},{default:S(()=>[(r(!0),m(me,null,Ke(e.tabs,(f,A)=>(r(),N(O,{key:A},{header:S(()=>[s("span",null,C(f.title),1),e.tmp_survey.questions.length>1?te((r(),m("i",{key:0,class:"pi pi-times",onClick:E=>e.confirmDeleteQuestion(E,A)},null,8,Sa)),[[p,"Delete",void 0,{top:!0}]]):g("",!0)]),default:S(()=>[(r(),N(Q,{index:A,tmp_survey:e.tmp_survey,languages:e.languages,submitForm:e.submitForm,key:e.countForUpdate,onUpdateAnswer:t[15]||(t[15]=E=>e.updateAnswerFromTabQuestion(E)),onUpdateTypology:t[16]||(t[16]=E=>e.updateTypologyFromTabQuestion(E)),onUpdateText:t[17]||(t[17]=E=>e.updateTextFromTabQuestion(E))},null,8,["index","tmp_survey","languages","submitForm"]))]),_:2},1024))),128))]),_:1},8,["activeIndex"])]}),_:1})]),d(_,null,{message:S(u=>[s("div",Ta,[s("i",{class:U(u.message.icon),style:{"font-size":"1.5rem"}},null,2),s("p",Aa,C(u.message.message),1)])]),_:1}),d(_,{group:"push",id:"push"},{message:S(u=>[s("div",Fa,[s("i",{class:U(u.message.icon),style:{"font-size":"1.5rem"}},null,2),s("p",Ua,C(u.message.message),1)]),s("div",qa,[d(F,{label:"Cancel",class:"mr-3 p-button-text text-500",onClick:e.closePopup},null,8,["onClick"]),d(F,{label:"Send",class:"mr-4",onClick:e.sendPush},null,8,["onClick"])])]),_:1}),d(_,{group:"delete",id:"delete"},{message:S(u=>[s("div",Da,[s("i",{class:U(u.message.icon),style:{"font-size":"1.5rem"}},null,2),s("p",Ia,C(u.message.message),1)]),s("div",Ea,[d(F,{label:"No",class:"mr-3 p-button-text text-500",onClick:e.closePopup},null,8,["onClick"]),d(F,{label:"Yes",class:"mr-4",onClick:I=>{var z;return e.confirmDelete((z=u.message)==null?void 0:z.acceptLabel)}},null,8,["onClick"])])]),_:1}),d(_,{group:"notification-group",id:"notification-group"},{message:S(()=>[s("div",Na,[Ba,s("p",null," Last push sent at: "+C(e.formatDataFromISO(e.surveyDetail.last_notification_at)),1)])]),_:1})],64)}const Za=he(Bt,[["render",ja]]);export{Za as default};
