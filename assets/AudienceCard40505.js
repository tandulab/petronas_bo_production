import{e as w}from"./helpers40505.js";import{o as V,u as y,c as m,r as d,af as k,b as p,e as A,i as G,z as U,g as s,h as f}from"./usetoast.esm40505.js";import{u as I}from"./group40505.js";import{u as M}from"./user40505.js";import{_ as R}from"./_plugin-vue_export-helper40505.js";const z={setup(v,t){V(()=>{S()});const _=I(),e=M(),g=y(),b=m(()=>_.allGroups),i=m(()=>g.getSelectedCountry),u=m(()=>{var c;return((c=i.value)==null?void 0:c.country_code)==="IT"?e.userRolesItaly:e.userRoles}),a=d(!0),o=d(!0),n=d(!0),l=d({}),h=k(),C=function(c,r){switch(c){case 1:{r?(l.value.target_clusters=[],l.value.target_group_ids=[],a.value=!1,n.value=!1):(n.value=!0,a.value=!0);break}case 2:{r?(a.value=!1,l.value.target_group_ids=[],l.value.target_all=!1):a.value=!0;break}case 3:{r?(n.value=!1,l.value.target_clusters=[],l.value.target_all=!1):n.value=!0;break}}};t.expose({tmp_audience:l});const S=async function(c){const r=new Map;r.set("country_id",i.value.id),await _.fetchAllGroups(r).catch(x=>{w(h,x)})};return{allGroups:b,showSelectGroups:a,showCheckboxAll:o,showSelectClusters:n,tmp_audience:l,userRoles:u,setSelected:C}}},B=s("div",{class:"flex align-items-center justify-content-between"},[s("h2",{class:"mb-0"},"AUDIENCE")],-1),N={class:"formgrid grid col-10 px-0 align-items-center"},E={class:"field col-2 mt-4 mb-0",style:{"min-width":"fit-content"}},L={class:"field-checkbox",style:{"white-space":"nowrap"}},T=s("label",{for:"binary"},"All users",-1),j={class:"field col-4 flex flex-column"},D=s("label",{for:"cluster"},"Cluster",-1),q={class:"field col-4 flex flex-column"},F=s("label",{for:"cluster"},"Groups",-1);function H(v,t,_,e,g,b){const i=p("Checkbox"),u=p("MultiSelect"),a=p("Card");return A(),G(a,{class:"mt-4"},{content:U(()=>[B,s("div",N,[s("div",E,[s("div",L,[f(i,{inputId:"binary",modelValue:e.tmp_audience.target_all,"onUpdate:modelValue":t[0]||(t[0]=o=>e.tmp_audience.target_all=o),binary:!0,disabled:!e.showCheckboxAll,onChange:t[1]||(t[1]=o=>e.setSelected(1,e.tmp_audience.target_all))},null,8,["modelValue","disabled"]),T])]),s("div",j,[D,f(u,{id:"cluster",modelValue:e.tmp_audience.target_clusters,"onUpdate:modelValue":t[2]||(t[2]=o=>e.tmp_audience.target_clusters=o),options:e.userRoles,class:"capitalize",optionLabel:"name",optionValue:"value",disabled:!e.showSelectClusters,onChange:t[3]||(t[3]=o=>e.setSelected(2,e.tmp_audience.target_clusters.length>0)),closeIcon:""},null,8,["modelValue","options","disabled"])]),s("div",q,[F,f(u,{id:"cluster",modelValue:e.tmp_audience.target_group_ids,"onUpdate:modelValue":t[4]||(t[4]=o=>e.tmp_audience.target_group_ids=o),options:e.allGroups,class:"capitalize",optionLabel:"name",optionValue:"id",disabled:!e.showSelectGroups,onChange:t[5]||(t[5]=o=>e.setSelected(3,e.tmp_audience.target_group_ids.length>0)),closeIcon:""},null,8,["modelValue","options","disabled"])])])]),_:1})}const W=R(z,[["render",H]]);export{W as A};
