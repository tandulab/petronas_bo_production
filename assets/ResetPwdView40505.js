import{d as L,o as j,u as P,af as U,r as b,t as k,c as B,a as N,b as d,e as u,f as c,h as r,z as $,g as t,m as h,A as v,j as S}from"./usetoast.esm40505.js";import{u as R,r as _}from"./index.esm405052.js";import{s as z,h as g,e as T}from"./helpers40505.js";import{u as A,L as I}from"./sidebar40505.js";import"./country40505.js";import{u as M}from"./user40505.js";import{a as q}from"./runtime-dom.esm-bundler40505.js";import{_ as x}from"./_plugin-vue_export-helper40505.js";const D=L({name:"LoginView",setup(){j(()=>{m.setSidebarVisibility(!1)});const e=P(),o=U(),m=A(),f=b(1),a=k({password:"",password_confirmation:""}),w={password:{required:_},password_confirmation:{required:_}},n=b(!1),i=R(w,a),l=B(()=>e.user),p=M();return{formStep:f,formSubmitted:n,v$:i,currentUser:l,handleSubmit:V=>{if(n.value=!0,!V)return;const y={id:l.value.id,password:a.password,password_confirmation:a.password_confirmation};z(),p.changePassword(y).then(()=>{g(),m.setSidebarVisibility(!0),N.push({name:"login"})}).catch(C=>{g(),T(o,C)})}}},components:{LogoPetronas:I}}),E={class:"flex justify-content-center align-items-center h-screen"},W={class:"mt-5 text-center"},F=t("h1",{class:"text-center mb-2"},"Reset password",-1),G=t("h2",{class:"font-normal mb-4"}," Welcome! Please enter your new password. ",-1),H={class:"flex justify-content-between mt-1"},J={key:0,class:"p-error col-5 p-0 m-0"},K={class:"w-full flex flex-column flex-1"},O={class:"flex justify-content-between mt-1"},Q={key:0,class:"p-error col-5 p-0 m-0"},X={class:"mt-2 text-right w-full mb-3"};function Y(e,o,m,f,a,w){const n=d("LogoPetronas"),i=d("InputText"),l=d("Button"),p=d("Card");return u(),c("div",E,[r(p,{class:"p-4"},{header:$(()=>[t("div",W,[r(n,{class:"w-7rem"})])]),content:$(()=>[F,G,t("form",{class:"mt-4 flex flex-column",onSubmit:o[2]||(o[2]=q(s=>e.handleSubmit(!e.v$.$invalid),["prevent"]))},[r(i,{id:"password",class:h({"p-invalid":e.v$.password.$invalid&&e.formSubmitted,"w-100":!0,"mt-3":!0,"mb-1":!0}),type:"password",placeholder:"New password*",modelValue:e.v$.password.$model,"onUpdate:modelValue":o[0]||(o[0]=s=>e.v$.password.$model=s)},null,8,["class","modelValue"]),t("div",H,[e.formSubmitted&&e.v$.password.$errors.length>0?(u(),c("label",J,v(e.v$.password.$errors.map(s=>s.$message).join("<br />")),1)):S("",!0)]),t("div",K,[r(i,{id:"password_confirmation",class:h({"p-invalid":e.v$.password.$invalid&&e.formSubmitted,"w-100":!0,"mt-3":!0,"mb-1":!0}),type:"password",placeholder:"Confirm password*",modelValue:e.v$.password.$model,"onUpdate:modelValue":o[1]||(o[1]=s=>e.v$.password.$model=s)},null,8,["class","modelValue"]),t("div",O,[e.formSubmitted&&e.v$.password.$errors.length>0?(u(),c("label",Q,v(e.v$.password.$errors.map(s=>s.$message).join("<br />")),1)):S("",!0)])]),t("div",X,[r(l,{type:"submit",label:"Reset",class:"w-full mt-4 capitalize"})])],32)]),_:1})])}const ie=x(D,[["render",Y]]);export{ie as default};
