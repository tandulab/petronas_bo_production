import{a as B}from"./api.esm40505.js";import{o as D,u as $,c as h,af as P,r as y,a as E,b as r,l as K,e as p,f as g,h as a,z as n,C as R,i as A,m as S,w as z,g as x,A as O}from"./usetoast.esm40505.js";import{u as k}from"./user40505.js";import{u as N}from"./country40505.js";import{e as I}from"./helpers40505.js";import{w as V}from"./runtime-dom.esm-bundler40505.js";import{_ as T}from"./_plugin-vue_export-helper40505.js";import"./utils.esm40505.js";const L={setup(){D(()=>{_.value=!0,s.value={first:0,rows:f.value.rows,sortField:null,sortOrder:null,filters:u.value},B.register("myfilter",(t,M)=>t===M),e()});const c=k(),l=N(),b=$(),o=h(()=>c.responseUsers),w=h(()=>l.allCountries);h(()=>b.getUserCountryId);const U=h(()=>c.userAdminRoles),v=h(()=>b.getSelectedCountry),i=P(),f=y(),u=y({role:{value:"",matchMode:"contains"},full_name:{value:"",matchMode:"contains"},email:{value:"",matchMode:"contains"}}),_=y(!0),s=y(),F=y(0),C=y([{label:"My Filter",value:"myfilter"}]);function e(){_.value=!0;const t=new Map;t.set("country_id",v.value.id),t.set("role",u.value.role.value),t.set("email",u.value.email.value),t.set("full_name",u.value.full_name.value),t.set("page",s.value.page+1),t.set("per_page",s.value.rows),s.value.sortField&&(s.value.sortOrder==1?t.set("sorted_by",s.value.sortField+"_asc"):t.set("sorted_by",s.value.sortField+"_desc")),setTimeout(()=>{m(t)},Math.random()*1e3+250)}const m=async function(t){await c.fetchAllAdminUsers(t).then(()=>{_.value=!1}).catch(M=>{_.value=!1,I(i,M)})};return{dt:f,responseUsers:o,filters:u,loading:_,totalRecords:F,lazyParams:s,loadLazyData:e,matchModes:C,countries:w,userAdminRoles:U,onPage:t=>{s.value=t,e()},onSort:t=>{s.value=t,e()},onFilter:()=>{s.value.page=0,s.value.filters=u.value,e()},toggleEdit:function(t){E.push({name:"user-admin-detail",params:{id:t.id}})}}}};const j=x("div",{class:"w-full text-center"},"Active",-1),q={key:0,class:"pi pi-check text-color-secondary"},G={key:1,class:"pi pi-times text-red-600"};function H(c,l,b,o,w,U){const v=r("InputText"),i=r("Column"),f=r("Badge"),u=r("Dropdown"),_=r("Button"),s=r("DataTable"),F=r("ConfirmPopup"),C=K("tooltip");return p(),g("div",null,[a(s,{value:o.responseUsers.users,totalRecords:o.responseUsers.total,lazy:!0,paginator:!0,rows:30,filters:o.filters,"onUpdate:filters":l[0]||(l[0]=e=>o.filters=e),ref:"dt",dataKey:"id",loading:o.loading,onPage:l[1]||(l[1]=e=>o.onPage(e)),onSort:l[2]||(l[2]=e=>o.onSort(e)),onFilter:l[3]||(l[3]=e=>o.onFilter()),filterDisplay:"row",removableSort:""},{empty:n(()=>[R(" No users found. ")]),default:n(()=>[a(i,{field:"full_name",header:"Full name",filterMatchMode:"contains",ref:"full_name",sortable:!1,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:n(({filterModel:e,filterCallback:m})=>[a(v,{type:"text",modelValue:e.value,"onUpdate:modelValue":d=>e.value=d,onKeydown:V(d=>m(),["enter"]),class:"p-column-filter",placeholder:"Filter by full name"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1},512),a(i,{field:"email",header:"Email",filterMatchMode:"contains",ref:"email",sortable:!1,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{filter:n(({filterModel:e,filterCallback:m})=>[a(v,{type:"text",modelValue:e.value,"onUpdate:modelValue":d=>e.value=d,onKeydown:V(d=>m(),["enter"]),class:"p-column-filter",placeholder:"Filter by email"},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1},512),a(i,{field:"role",header:"Cluster",filterMatchMode:"contains",ref:"role",sortable:!1,showFilterMatchModes:!1,showFilterOperator:!1,showFilterMenu:!1},{body:n(({data:e})=>[e.role!="super_admin"?(p(),A(f,{key:0,value:e.role,class:S(["px-4 border-round-lg",e.role])},null,8,["value","class"])):(p(),A(f,{key:1,value:"Super admin",class:S(["px-4 border-round-lg",e.role])},null,8,["class"]))]),filter:n(({filterModel:e,filterCallback:m})=>[a(u,{modelValue:e.value,"onUpdate:modelValue":d=>e.value=d,options:o.userAdminRoles,optionValue:"value",optionLabel:"name",onChange:d=>m(),placeholder:"Filter by cluster"},null,8,["modelValue","onUpdate:modelValue","options","onChange"])]),_:1},512),a(i,{header:"",bodyStyle:"text-align: center",style:{width:"20rem"}},{header:n(()=>[j]),body:n(({data:e})=>[e.enabled?(p(),g("i",q)):(p(),g("i",G))]),_:1}),a(i,{header:"",style:{width:"4rem"}},{body:n(({data:e})=>[z(a(_,{type:"button",onClick:m=>o.toggleEdit(e),"aria-haspopup":"true","aria-controls":"overlay_menu",class:"p-button-text p-button-rounded text-300 surface-200 mr-3",icon:"pi pi-pencil"},null,8,["onClick"]),[[C,"Edit",void 0,{top:!0}]])]),_:1})]),_:1},8,["value","totalRecords","filters","loading"]),a(F)])}const J=T(L,[["render",H]]),Q={setup(){const c=k();return{totalUser:h(()=>c.getTotalUsers)}},components:{UsersAdminTable:J}},W={class:"flex justify-content-between align-items-center"},X={class:"uppercase"},Y={key:0},Z={key:1};function ee(c,l,b,o,w,U){const v=r("Button"),i=r("UsersAdminTable"),f=r("Card");return p(),g("div",null,[a(f,null,{content:n(()=>[x("div",W,[x("h1",X,[o.totalUser==1?(p(),g("span",Y," 1 User Admin")):(p(),g("span",Z,O(o.totalUser)+" Users Admin",1))]),a(v,{label:"user",onClick:l[0]||(l[0]=u=>c.$router.push("/user-admin-detail")),icon:"pi pi-plus",class:"mb-3"})]),a(i)]),_:1})])}const me=T(Q,[["render",ee]]);export{me as default};
